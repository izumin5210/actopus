<%= content_header('user', '教員データを見る') %>

<table class="table table-lecturer">
  <tbody>
    <% @lecturers.group_by(&:department).each do |department, lecturers| %>
    <tr>
      <th class="lecturer-department">
      <% if department.present? %>
        <%= department.abbreviation_name %>
        <%= department.name %>
      <% else %>
        <%= 'Unknown' %>
      <% end %>
      </th>
    </tr>
    <% lecturers.each do |lecturer| %>
    <tr>
      <td class="lecturer-name">
        <%= lecturer.name %>
      </td>
      <td>
        <%= form_for [:staffs, lecturer] do |f| %>

          <!# TODO: 所属学科の変更機能を実装%>

          <%= f.collection_select :department_id, Department.all, :id, :abbreviation_name, { prompt: Department.model_name.human }, { class: "form-control btn-primary" } %>
        <% end %>
      </td>

      <td><%= link_to fa_icon('search fw') { |i| "#{i} 時間割を見る" }, timetable_staffs_lecturer_path(lecturer.id), class: "btn btn-primary" %></td>
      <td><%= staff_renew_btn '#' %></td>
      <td><%= staff_destroy_btn '#' %></td>
    </tr>
    <% end %>
    <% end %>
  </tbody>
</table>
